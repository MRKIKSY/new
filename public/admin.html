<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>PWAN Buy2Sell Admin Dashboard</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 2rem; max-width: 1000px; }
    h2 { color: #003366; text-align: center; }
    table { width: 100%; border-collapse: collapse; margin-top: 20px; }
    th, td { border: 1px solid #ccc; padding: 8px; text-align: left; }
    th { background: #003366; color: #fff; }
    button { padding: 5px 10px; background: #003366; color: white; border: none; cursor: pointer; }
    button:hover { background: #0055a0; }
    #loginDiv, #dashboardDiv { margin-top: 20px; }
    .file-link { display: block; margin-bottom: 5px; }
  </style>
</head>
<body>

<h2>PWAN Buy2Sell Admin Dashboard</h2>

<div id="loginDiv">
  <h3>Admin Login</h3>
  <input type="text" id="adminEmail" placeholder="Email" style="width: 250px; padding:5px;">
  <input type="password" id="adminPassword" placeholder="Password" style="width: 250px; padding:5px;">
  <button id="loginBtn">Login</button>
  <div id="loginMessage" style="margin-top:10px; font-weight:bold;"></div>
</div>

<div id="dashboardDiv" style="display:none;">
  <button id="logoutBtn" style="margin-bottom:15px;">Logout</button>
  <h3>Submissions</h3>
  <table id="submissionsTable">
    <thead>
      <tr>
        <th>Full Name</th>
        <th>Email</th>
        <th>Payment Date</th>
        <th>Account Details</th>
        <th>Documents</th>
        <th>Submitted At</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>
</div>

<script>
const loginDiv = document.getElementById('loginDiv');
const dashboardDiv = document.getElementById('dashboardDiv');
const loginMessage = document.getElementById('loginMessage');
const submissionsTableBody = document.querySelector('#submissionsTable tbody');

document.getElementById('loginBtn').onclick = async () => {
  const email = document.getElementById('adminEmail').value.trim();
  const password = document.getElementById('adminPassword').value.trim();

  if (!email || !password) {
    loginMessage.innerText = 'Enter email and password';
    return;
  }

  try {
    const res = await fetch('/admin/login', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ email, password })
    });
    const data = await res.json();
    if (data.success) {
      loginDiv.style.display = 'none';
      dashboardDiv.style.display = 'block';
      loadSubmissions();
    } else {
      loginMessage.innerText = data.error || 'Login failed';
    }
  } catch {
    loginMessage.innerText = 'Login error';
  }
};

document.getElementById('logoutBtn').on
